#!/usr/bin/env sh

set -eu

if [ $(which docker || false) ]; then
    readonly rootDir=$(realpath $(dirname $(realpath $0))/../..)

    docker \
        run \
            -it \
            --rm \
            --volume ${rootDir}:/app:ro \
            --entrypoint /app/bin/ci/composer-validate \
            --workdir=/app \
            steevanb/php-ci:latest
else
    composer validate
fi
