#!/usr/bin/env bash

set -eu

readonly ROOT_DIR="$(realpath "$(dirname "$(realpath "$0")")/..")"

source "${ROOT_DIR}"/config/version/composer-version.env
source "${ROOT_DIR}"/bin/docker-interactive-parameter.inc.bash

docker \
    run \
        --rm \
        --tty \
        ${DOCKER_INTERACTIVE_PARAMETER} \
        --volume "${ROOT_DIR}":/app \
        --user "$(id -u)":"$(id -g)" \
        --env COMPOSER_CACHE_DIR=/app/var/composer \
        composer:"${COMPOSER_VERSION}" \
        "${@}"
